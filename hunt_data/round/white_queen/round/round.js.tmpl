{% include "common.js" %}
{% include "round-meta.js" %}

mh.submit_title = function(cell_id, above) {
    var outer = $('#mh-submit-title');
    var bg = $('#mh-submit-title-bg');
    var inner = $('#mh-submit-title-inner');
    bg.stop(true, true);
    outer.stop(true, true);
    if (outer.is(':visible')) {
	bg.fadeTo('slow', 0, function() {
	    bg.hide();
        });
        outer.fadeToggle('slow', function() {
            inner.html('');
        });
    } else {
	var c = $('#'+cell_id).offset();
	var t;
        if (above)
            t = c.top - 450;
        else
            t = c.top + 50;
	var l = c.left - 165;
	outer.css('top', t+'px');
	outer.css('left', l+'px');
	$('body').append(outer);
        inner.html('<iframe src="{{ root }}/dynamic/submit/meta/' + cell_id + '" id="mh-submit-title-iframe"></iframe>');
	bg.fadeTo('slow', 0.5);
        outer.fadeToggle('slow');
    }
};
$('#mh-submit-title-bg').click(mh.submit_title);
